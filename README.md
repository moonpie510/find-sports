## Описание
REST API, позволяющее пользователям бронировать временные слоты на спортивной площадке. Один заказ может включать несколько слотов. Пользователь проходит аутентификацию по приватному API токену.

API поддерживает создание, изменение и просмотр бронирований, с проверкой пересечений по времени.

## Бизнес правила
1. При создании брони пользователь может указать несколько временных слотов.
2. При обновлении можно изменить один слот (по slot_id) или добавить новый слот к уже существующему заказу.
3. Временные слоты не должны пересекаться с другими слотами на той же площадке (на уровне всей системы, не только у текущего пользователя) и внутри заказа.
4. Нельзя удалять или обновлять чужие бронирования

## Установка
- Клонируем репозиторий `git clone git@github.com:moonpie510/find-sports.git`
- Переходим в папку с проектом
- Создаем .env на основе .env.example
- Запускаем докер `docker compose up -d`
- Заходим в контейнер `docker exec -it sport_php-fpm bash`
- Запускаем `npm i`
- Запускаем `composer install`
- `php artisan storage:link`
- `chmod 777 -R ./storage`
- Генерируем ключ для приложения `php artisan key:generate`
- Запускаем миграции с сидами `php artisan migrate --seed`
- Создайте тестовую БД `php artisan app:create-test-schema`
- Запускаем `npm run dev`
- Опять открываем другую вкладку терминала и заходим в контейнер `docker exec -it sport_php-fpm bash` и запускаем `php artisan test`

## Тесты
Написаны future и unit тесты.

Перед запуском тестов необходимо создать тестовую БД `sport_test`.

Команда для создания тестовой БД:
```php
php artisan app:create-test-schema
```

## Документация API
Проект задокументирован с помощью Swagger. Чтобы увидеть документацию, откройте адрес `/api/documentation`.

Команда для генерации документации:
```php
php artisan l5-swagger:generate
```

## CI/CD
При каждом push в ветку:
- Устанавливаются зависимости composer и npm;
- Запускается сборка проекта;
- Прогоняются тесты;
